<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AIMET AdaRound &mdash; AI Model Efficiency Toolkit Documentation: ver 1.34.0</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/style.css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Quantized Modules" href="../torch_docs/quantized_modules.html" />
    <link rel="prev" title="Post-Training Quantization" href="../torch_docs/examples/ptq.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

    
    
    <a href="../torch_docs/index.html" class="icon icon-home">
    AI Model Efficiency Toolkit
      <img src="../_static/brain_logo.png" class="logo" alt="Logo"/>
    </a>
      <div class="version">
        1.34.0
      </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install/install_host.html">Install in Host Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/install_docker.html">Install in Docker Container</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../torch_docs/tutorials/quickstart_guide.html">Quickstart Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../torch_docs/examples/ptq.html">Post-Training Quantization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Feature Descriptions</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#"> Adaptive Rounding (AdaRound)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">AIMET PyTorch API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../torch_docs/quantized_modules.html">Quantized Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../torch_docs/quantizer.html">Quantizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../torch_docs/encoding_analyzer.html">Encoding Analyzers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../torch_docs/api/nn.fake_quantization_mixin.html">FakeQuantizationMixin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../torch_docs/api/nn.quantization_mixin.html">QuantizationMixin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../torch_docs/api/quantization/affine/index.html">quantization.affine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../torch_docs/api/quantization/float/index.html">quantization.float</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../torch_docs/index.html">AI Model Efficiency Toolkit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../torch_docs/index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">AIMET AdaRound</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user_guide/adaround.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="../torch_docs/examples/ptq.html" class="btn btn-neutral float-left" title="Post-Training Quantization" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../torch_docs/quantized_modules.html" class="btn btn-neutral float-right" title="Quantized Modules" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="aimet-adaround">
<span id="ug-adaround"></span><h1>AIMET AdaRound<a class="headerlink" href="#aimet-adaround" title="Permalink to this heading"></a></h1>
<blockquote>
<div><p>AIMET quantization features, by default, use the “nearest rounding” technique for achieving quantization.
In the following figure, a single weight value in a weight tensor is shown as an illustrative example. When using the
“nearest rounding” technique, this weight value is quantized to the nearest integer value. The Adaptive Rounding
(AdaRound) feature, uses a smaller subset of the unlabelled training data to adaptively round the weights of modules
with weights. In the following figure, the weight value is quantized to the integer value far from it. AdaRound,
optimizes a loss function using the unlabelled training data to adaptively decide whether to quantize a specific
weight to the integer value near it or away from it. Using the AdaRound quantization, a model is able to achieve an
accuracy closer to the FP32 model, while using low bit-width integer quantization.</p>
<p>When creating a QuantizationSimModel using the AdaRounded model, use the QuantizationSimModel provided API for
setting and freezing parameter encodings before computing the encodings. Please refer the code example in the AdaRound
API section.</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/adaround.png"><img alt="../_images/adaround.png" src="../_images/adaround.png" style="width: 900px;" />
</a>
<section id="adaround-use-cases">
<h2>AdaRound Use Cases<a class="headerlink" href="#adaround-use-cases" title="Permalink to this heading"></a></h2>
</section>
<section id="common-terminology">
<h2>Common terminology<a class="headerlink" href="#common-terminology" title="Permalink to this heading"></a></h2>
<blockquote>
<div><ul class="simple">
<li><p>BC - Bias Correction</p></li>
<li><p>BNF - Batch Norm Folding</p></li>
<li><p>CLE - Cross Layer Equalization</p></li>
<li><p>HBF -  High Bias Folding</p></li>
<li><p>QAT - Quantization Aware Training</p></li>
<li><p>{ } - An optional step in the use case</p></li>
</ul>
</div></blockquote>
</section>
<section id="use-cases">
<h2>Use Cases<a class="headerlink" href="#use-cases" title="Permalink to this heading"></a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><dl class="simple">
<dt>{BNF} –&gt; {CLE} –&gt; AdaRound</dt><dd><p>Applying BNF and CLE are optional steps before applying AdaRound. Some models benefit from applying CLE
while some don’t get any benefit.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>AdaRound –&gt; QAT</dt><dd><p>AdaRound is a post-training quantization feature. But, for some models applying BNF and CLE may not be beneficial.
For these models, QAT after AdaRound may be beneficial. AdaRound is considered as a better weights initialization
step which helps for faster QAT.</p>
</dd>
</dl>
</li>
</ol>
<p>Not recommended</p>
</div></blockquote>
<blockquote>
<div><ol class="arabic simple">
<li><p>AdaRound –&gt; BC</p></li>
<li><p>BC –&gt; AdaRound</p></li>
</ol>
<p>AdaRound Hyper parameters guidelines</p>
</div></blockquote>
<hr class="docutils" />
<p>There are couple of hyper parameters required during AdaRound optimization and are exposed to users. But some of them
are with their default values which lead to good and stable results over many models and not recommended to change often.</p>
<p>Following is guideline for Hyper parameters:</p>
<ol class="arabic simple">
<li><p>Hyper Parameters to be changed often: number of batches (approximately 500-1000 images, if batch size of data loader
is 64, then 16 number of batches leads to 1024 images), number of iterations(default 10000)</p></li>
<li><p>Hyper Parameters to be changed moderately: regularization parameter (default 0.01)</p></li>
<li><p>Hyper Parameters to be changed least: beta range(default (20, 2)), warm start period (default 20%)</p></li>
</ol>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="adaround-api">
<h2>AdaRound API<a class="headerlink" href="#adaround-api" title="Permalink to this heading"></a></h2>
<p>Please refer to the links below to view the AdaRound API for each AIMET variant:</p>
<ul class="simple">
<li><p><span class="xref std std-ref">AdaRound for PyTorch</span></p></li>
<li><p><span class="xref std std-ref">AdaRound for Keras</span></p></li>
<li><p><span class="xref std std-ref">AdaRound for ONNX</span></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../torch_docs/examples/ptq.html" class="btn btn-neutral float-left" title="Post-Training Quantization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../torch_docs/quantized_modules.html" class="btn btn-neutral float-right" title="Quantized Modules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Qualcomm Innovation Center, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>